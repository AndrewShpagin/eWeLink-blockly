<!DOCTYPE html>
<html>

<head>
  <script src="splide.min.js"></script>
  <link rel="stylesheet" href="splide.min.css">
  <link rel="stylesheet" href="splide-sea-green.min.css">
  <style>
    .splide__slide img {
      width: 100%;
      height: 'auto';
      white-space: normal;
    }

    .myButton {
      background-color: #4CAF50;
      border-radius: 6pt;
      border: 1pt solid #18ab29;
      display: inline-block;
      cursor: pointer;
      color: #ffffff;
      font-family: Arial;
      font-size: 30pt;
      padding: 2pt 10pt;
      text-decoration: none;
      text-shadow: 0px 1pt 0pt #2f6627;
    }
  </style>
</head>

<body>
  <div id="image-slider" class="splide">
    <div class="splide__track">
      <ul id="slideslist" class="splide__list">
      </ul>
    </div>
  </div>
  <script>

    const files = [
      "slides/ru/ewelink.png",
      "slides/ru/scenarios.png",
      "slides/ru/login.png",
      "slides/ru/create.png",
      "slides/ru/newtable.png",
      "slides/ru/runscripts.png",
      "slides/ru/pastescript.png",
      "slides/ru/renamesaverun.png",
      "slides/ru/allow1.png",
      "slides/ru/allow2.png",
      "slides/ru/allow3.png",
      "slides/ru/allow4.png",
      "slides/ru/allow5.png",
      "slides/ru/scriptdone.png",
      "slides/ru/gototriggers.png",
      "slides/ru/firstdata.png",
      "slides/ru/addtrigger.png",
      "slides/ru/tunetrigger.png",
      "slides/ru/edittrigger.png"
    ];

    const menu = document.getElementById("mainmenu");
    
    var w = document.body.clientWidth;
    var h = document.body.clientHeight;
    if(menu)h -= menu.clientHeight;
    h-= 75;

    var nSlides = w*(1080+80)/h/(1920+80); 
    if(nSlides<1)nSlides=1;

    console.log(w2ui.layout_main_toolbar);
    //const proportion = 1920.0 / (1080 + 40);
    //const width = Math.min(w * 0.98, h * proportion);
    //console.log(sl);
    //document.getElementById("slideshow").style.maxWidth = `${width}px`;

    const slideslist = document.getElementById("slideslist");
    for (var i = 0; i < files.length; i++) {
      slideslist.insertAdjacentHTML('beforeend', `<li id="slide${i}" class="splide__slide"><img src="${files[i]}"></li>`);
    }
    const slide = document.getElementById("slide4");
    slide.insertAdjacentHTML('beforeend',
      `<button onclick="removeHelp()" class="myButton" style = "align: center; position: absolute;top: 50%; left:50%; transform: translateX(-50%);">Хочу смотреть блоки!</button>`);

    console.log("start");
    function runOnStart() {
      new Splide('#image-slider', {
        focus: 'center',
        perPage: nSlides,
      }).mount();
    }
    setTimeout( () => {
      if (document.readyState !== 'loading') {
        runOnStart();
      }
      else {
        document.addEventListener('DOMContentLoaded', function () {
          runOnStart()
        });
      }
    }, 500);
  </script>
</body>

</html>